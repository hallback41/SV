@use '../../../styles/helpers' as *;
@use 'sass:math';

// ====== ПАРАМЕТРЫ ТЕМЫ ======
$bg: #e9e7e3;
$bg-light: #e9e7e3;
$panel: #efefef;
$shadow: #808080;
$hilite: #ffffff;
$mid: #c0c0c0;
$line: #9b9b9b;
$blue: #0033cc;
$green: #009933;
$text: #000;

// БАЗА ДИЗАЙНА: 12px — оригинальный кегль ICQ
$base-font: 12;

// Компонентная единица:  em от базового кегля внутри компонента
@function em12($px) {
  @return math.div($px, $base-font) * 1em;
}

@mixin bevel-out {
  border-top: em12(2) solid $hilite;
  border-left: em12(2) solid $hilite;
  border-right: em12(2) solid $shadow;
  border-bottom: em12(2) solid $shadow;
  background: $panel;
}

@mixin bevel-in {
  border-top: em12(2) solid $shadow;
  border-left: em12(2) solid $shadow;
  border-right: em12(2) solid $hilite;
  border-bottom: em12(2) solid $hilite;
  background: $panel;
}

// ====== КОРНЕВОЙ КОНТЕЙНЕР (fluid) ======
.icq2001b {
  font-family: Tahoma, Verdana, sans-serif;
  font-size: clamp(10px, 1.2vw, 14px);

  // "резиновая" ширина окна в коридоре ~280–420px + 100% по контейнеру
  width: clamp(em12(220), 100%, em12(310));
  max-width: 100%;

  background: $bg;
  color: $text;

  // тонкая внутренняя рамка (тоже «резиновая» по масштабу компонента)
  box-shadow: 0 0 0 em12(1) #000 inset;

  scale: 0.7;
}

// ====== TITLEBAR ======
.titlebar {
  height: em12(22);
  background: linear-gradient(#0a4ba4, #043d86);
  color: #fff;
  display: grid;
  grid-template-columns: em12(20) 1fr auto;
  align-items: center;
  padding: 0 em12(2);
  box-shadow: 0 em12(1) 0 #000 inset;

  &__appicon {
    width: em12(16);
    height: em12(16);
    margin-left: em12(2);
    background: url('@/assets/icq/icons/icq_flower_30.png') no-repeat center/contain;
  }
  &__title {
    font-weight: 700;
    letter-spacing: em12(0.3);
    margin-left: em12(4);
  }
  &__controls {
    height: em12(12);
    display: grid;
    grid-auto-flow: column;
    gap: em12(2);
  }

  .wbtn {
    @include bevel-out;
    background: #c3c3c3;

    &--close {
      background-image: url('@/assets/icq/icons/close_10.png');
      background-repeat: no-repeat;
      background-position: center;
    }
    &--max {
      background-image: url('@/assets/icq/icons/max_10.png');
      background-repeat: no-repeat;
      background-position: center;
    }
    &--min {
      background-image: url('@/assets/icq/icons/min_10.png');
      background-repeat: no-repeat;
      background-position: center;
    }
    &:active {
      @include bevel-in;
    }
  }
}

// ====== HEADER PROMO ======
.header {
  padding: em12(6);
  border-bottom: em12(1) solid $line;
  background: $bg-light;
  margin-left: em12(2);
}
.promo {
  @include bevel-out;
  display: flex;
  align-items: center;
  gap: em12(6);
  padding: em12(6);

  &__logo {
    width: em12(30);
    height: em12(30);
    background: url('@/assets/icq/icons/icq_flower_30.png') no-repeat center/contain;
  }
  &__text {
    font-weight: 700;
    text-align: center;
    line-height: 1.05;
  }
}
.version {
  display: block;
  text-align: center;
  color: $blue;
  margin-top: em12(4);
  text-decoration: underline;
}

// ====== ОСНОВНАЯ ВНУТРЕННЯЯ СЕТКА ======
.body {
  display: grid;
  grid-template-columns: 1fr em12(36);
}

// ====== БОКОВАЯ ПАНЕЛЬ ======
.sidebar {
  background: repeating-linear-gradient(
    90deg,
    #e6e6e6,
    #e6e6e6 em12(1),
    #f6f6f6 em12(1),
    #f6f6f6 em12(3)
  );
  border-left: em12(1) solid $shadow;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: em12(4) em12(3);
  gap: em12(6);

  &__label {
    writing-mode: vertical-rl;
    transform: rotate(180deg);
    font-weight: 700;
    color: #0079c1;
    letter-spacing: em12(0.5);
  }
}

.sicon {
  width: em12(26);
  height: em12(26);
  @include bevel-out;
  background: #ddd;
  cursor: pointer;
  &:hover {
    filter: brightness(1.05);
  }
  &:active {
    @include bevel-in;
  }

  &--user {
    background-image: url('@/assets/icq/icons/side_user.png');
    background-size: em12(16) em12(16);
    background-repeat: no-repeat;
    background-position: center;
  }
  &--heart {
    background-image: url('@/assets/icq/icons/side_heart.png');
    background-size: em12(16) em12(16);
    background-repeat: no-repeat;
    background-position: center;
  }
  &--dove {
    background-image: url('@/assets/icq/icons/side_dove.png');
    background-size: em12(16) em12(16);
    background-repeat: no-repeat;
    background-position: center;
  }
  &--disk {
    background-image: url('@/assets/icq/icons/side_disk.png');
    background-size: em12(16) em12(16);
    background-repeat: no-repeat;
    background-position: center;
  }
  &--netscape {
    background-image: url('@/assets/icq/icons/side_netscape.png');
    background-size: em12(16) em12(16);
    background-repeat: no-repeat;
    background-position: center;
  }
}

// ====== ЛЕВАЯ КОЛОНКА: список ======
.listWrap {
  padding: em12(6);
}

.listHead {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: em12(6);
  margin: em12(2) 0 em12(4);

  &__label {
    font-weight: 700;
  }
  &__line {
    height: em12(1);
    background: $line;
  }

  &__btn {
    width: em12(22);
    height: em12(18);
    @include bevel-out;
    background: #dcdcdc;
    background-image: url('@/assets/icq/icons/caret_up.png');
    background-repeat: no-repeat;
    background-position: center;
  }
}

.contactsArea {
  display: grid;
  grid-template-columns: 1fr em12(18);
  gap: em12(6);
}
.contacts {
  @include bevel-in;
  background: #fff;
  padding: em12(6) em12(6) em12(6) em12(4);

  // высоту делаем «резиновой» по высоте экрана, но с пределами
  height: clamp(em12(120), 28vh, em12(220));
  overflow: hidden;

  li + li {
    margin-top: em12(4);
  }
}

.contact {
  display: grid;
  grid-template-columns: em12(18) 1fr auto;
  align-items: center;
  column-gap: em12(6);

  &__name {
    color: $blue;
    text-decoration: underline;
  }
  &__addons {
    display: flex;
    gap: em12(6);
  }
  &:hover {
    background: #cce5ff;
  }
}

.icon {
  width: em12(26);
  height: em12(26);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;

  &--na {
    background-image: url('@/assets/icq/icons/status_na.png');
  }
  &--flower {
    background-image: url('@/assets/icq/icons/status_flower.png');
  }
  &--file {
    background-image: url('@/assets/icq/icons/status_file.png');
  }
  &--flower-gray {
    background-image: url('@/assets/icq/icons/status_flower.png');
  }
}

.addon {
  width: em12(14);
  height: em12(14);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;

  &--phone {
    background-image: url('@/assets/icq/icons/add_phone.png');
  }
  &--on {
    background-image: url('@/assets/icq/icons/add_on.png');
  }
}

.scrollbar {
  display: grid;
  grid-template-rows: em12(18) 1fr em12(18);
  align-items: center;
  justify-items: stretch;

  &__btn {
    @include bevel-out;
    background: #dcdcdc;
    background-repeat: no-repeat;
    background-position: center;
  }
  &__btn--up {
    background-image: url('@/assets/icq/icons/caret_up.png');
  }
  &__btn--down {
    background-image: url('@/assets/icq/icons/caret_down.png');
  }

  &__track {
    @include bevel-in;
    background: #eee;
    padding: em12(2);
    display: flex;
  }
  &__thumb {
    background: #b0b0b0;
    border: em12(1) solid #7a7a7a;
    width: 100%;
    height: em12(40);
    margin: auto 0;
  }
}

// ====== КНОПКИ ======
.btn {
  @include bevel-out;
  padding: em12(4) em12(6);
  background: #dcdcdc;
  cursor: pointer;
  text-align: left;

  &:hover {
    filter: brightness(1.03);
  }
  &:active {
    @include bevel-in;
  }
}
.btn--wide {
  width: 100%;
  margin-top: em12(4);
}

.btnRow {
  display: grid;
  grid-template-columns: 1fr em12(22) em12(22);
  gap: em12(4);
  margin-top: em12(4);
}
.btn--square {
  height: em12(24);
  margin-top: em12(5);
  background-image: url('@/assets/icq/icons/triangle.png');
  background-repeat: no-repeat;
  background-position: center;
}

.notice {
  @include bevel-out;
  display: flex;
  align-items: center;
  gap: em12(6);
  padding: em12(4) em12(6);
  margin-top: em12(6);
  background: #f4f4f4;
}

.btn--xl {
  @include bevel-out;
  width: 100%;
  margin-top: em12(6);
  font-weight: 700;
  text-align: center;
}

.bottomBtns {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: em12(6);
  margin-top: em12(6);
}

// ====== STATUSBAR + INPUT ======
.statusbar {
  @include bevel-out;
  margin: em12(6) 0 em12(6);
  padding: em12(4);
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: em12(6);
  background: #ecebe7;
}
.statusbar__left {
  display: flex;
  align-items: center;
  gap: em12(6);
}
.iconSmall {
  width: em12(16);
  height: em12(16);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;

  &--flower {
    background-image: url('@/assets/icq/icons/flower_16_green.png');
  }
}
.statusbar__right {
  display: flex;
  align-items: center;
  gap: em12(4);
}
.input {
  @include bevel-in;
  width: clamp(em12(120), 50%, em12(200));
  height: em12(22);
  padding: 0 em12(6);
}
.go {
  @include bevel-out;
  padding: 0 em12(6);
  height: em12(22);
  font-weight: 700;
}

// ====== LINKS ======
a {
  color: $blue;
  text-decoration: underline;
}
